<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regulation Comments Analysis - Comment Analysis Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.5;
            background: #f8f9fa;
            color: #333;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .section {
            background: white;
            margin: 30px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        
        .filters-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }
        
        .filters-header {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .filter-label {
            font-weight: 500;
            color: #333;
            font-size: 0.9em;
        }
        
        .filterable {
            position: relative;
            cursor: pointer;
        }
        
        .filter-arrow {
            float: right;
            font-size: 12px;
            color: #666;
            margin-left: 8px;
            user-select: none;
        }
        
        .filter-arrow:hover {
            color: #007bff;
        }
        
        .filter-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            padding: 10px;
            min-width: 200px;
        }
        
        .filter-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .filter-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 1px rgba(0,123,255,0.25);
        }
        
        .filter-checkbox {
            display: block;
            margin: 5px 0;
            font-size: 13px;
            cursor: pointer;
        }
        
        .filter-checkbox input {
            margin-right: 6px;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin: 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        th {
            background: #e9ecef;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #dee2e6;
            vertical-align: top;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e3f2fd;
        }
        
        .stance-for {
            background: #28a745;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stance-against {
            background: #dc3545;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stance-neutral {
            background: #ffc107;
            color: #212529;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stance-unknown {
            background: #6c757d;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stances-container {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            max-width: 300px;
        }
        
        .stance-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            border: 1px solid #bbdefb;
        }
        
        .text-preview {
            max-width: 300px;
            max-height: 100px;
            overflow: hidden;
            font-size: 12px;
        }
        
        .comment-id {
            font-family: monospace;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .comment-id a:hover {
            color: #0056b3 !important;
            background-color: #e3f2fd;
        }
        
        .date-cell {
            white-space: nowrap;
            font-size: 12px;
        }
        
        .attachment-indicator {
            font-size: 16px;
            color: #28a745;
        }
        
        .unique-indicator {
            background: #28a745;
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .duplicate-indicator {
            background: #ffc107;
            color: #212529;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .meta-info {
            background: #343a40;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .meta-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .meta-label {
            font-size: 0.8em;
            opacity: 0.8;
        }
        
        .meta-value {
            font-weight: 600;
        }
        
        
        .clear-filters {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        
        .clear-filters:hover {
            background: #c82333;
        }
        
        .show-hide-columns {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        
        .show-hide-columns:hover {
            background: #0056b3;
        }
        
        .column-visibility-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .column-visibility-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 250px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1000;
            border-radius: 4px;
            padding: 10px;
            border: 1px solid #ddd;
            top: 100%;
            left: 0;
        }
        
        .column-visibility-content.show {
            display: block;
        }
        
        .column-visibility-item {
            display: flex;
            align-items: center;
            padding: 5px 0;
            gap: 8px;
        }
        
        .column-visibility-item input[type="checkbox"] {
            margin: 0;
        }
        
        .column-visibility-item label {
            cursor: pointer;
            font-size: 14px;
            margin: 0;
        }
        
        .char-limited {
            cursor: help;
        }
        
        /* Custom tooltip styling for wider tooltips */
        .tooltip .tooltip-inner {
            max-width: 600px !important;
            width: auto !important;
            text-align: left !important;
            font-size: 13px !important;
            line-height: 1.4 !important;
            padding: 8px 12px !important;
        }
        
        /* Allow table to be wider and let columns size naturally */
        table {
            width: 100%;
            table-layout: auto;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        /* Only constrain the comment column to prevent it from being too wide */
        th[data-column="5"] {
            width: 25%;
            max-width: 400px;
        }
        
        .text-preview {
            max-width: 400px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        /* Co-occurrence table styles */
        .cooccurrence-table {
            border-collapse: collapse;
            font-size: 12px;
            margin: 0 auto;
        }
        
        .cooccurrence-table th,
        .cooccurrence-table td {
            border: 1px solid #dee2e6;
            text-align: center;
            padding: 8px;
            min-width: 40px;
        }
        
        .cooccurrence-table .stance-label {
            text-align: left;
            font-weight: 500;
            max-width: 200px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .rotate-header {
            height: 150px;
            white-space: nowrap;
            vertical-align: bottom;
        }
        
        .rotate-header > div {
            transform: translate(15px, 65px) rotate(-45deg);
            width: 30px;
            transform-origin: bottom left;
            font-size: 11px;
            font-weight: 500;
        }
        
        .diagonal-cell {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #333;
        }
        
        .cooccurrence-cell {
            color: #333;
            font-weight: 500;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Regulation Comments Analysis</h1>
            <div class="subtitle">Analysis of public comments on federal regulation</div>
            
        </div>
        
        <!-- Summary Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">10</div>
                <div class="stat-label">Total Comments</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">0</div>
                <div class="stat-label">With Attachments</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">850</div>
                <div class="stat-label">Avg. Characters</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">2025-06-28</div>
                <div class="stat-label">Date Range</div>
            </div>
        </div>


        <!-- Analysis Field Distributions -->
        
        <div class="section">
            <h2>📊 Stances Distribution</h2>
            <p style="color: #666; margin-bottom: 20px; font-style: italic;">Click on any stance to see how it relates to others</p>
            <div class="expandable-stances">
                
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(0)">
                        <span class="stance-count">7</span>
                        <span class="stance-name">Opposition to Politicization of the Civil Service/Schedule F</span>
                        <span class="expand-icon" id="icon-0">▼</span>
                    </div>
                    <div class="stance-details" id="details-0" style="display: none;">
                        <div class="connection-item">86% also: Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</div><div class="connection-item">14% also: Opposition to Political Interference in Scientific and Grantmaking Roles</div>
                    </div>
                </div>
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(1)">
                        <span class="stance-count">6</span>
                        <span class="stance-name">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span>
                        <span class="expand-icon" id="icon-1">▼</span>
                    </div>
                    <div class="stance-details" id="details-1" style="display: none;">
                        <div class="connection-item">100% also: Opposition to Politicization of the Civil Service/Schedule F</div>
                    </div>
                </div>
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(2)">
                        <span class="stance-count">2</span>
                        <span class="stance-name">Opposition to Political Interference in Scientific and Grantmaking Roles</span>
                        <span class="expand-icon" id="icon-2">▼</span>
                    </div>
                    <div class="stance-details" id="details-2" style="display: none;">
                        <div class="connection-item">50% also: Opposition to Politicization of the Civil Service/Schedule F</div><div class="connection-item">50% also: Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)</div>
                    </div>
                </div>
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(3)">
                        <span class="stance-count">2</span>
                        <span class="stance-name">Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)</span>
                        <span class="expand-icon" id="icon-3">▼</span>
                    </div>
                    <div class="stance-details" id="details-3" style="display: none;">
                        <div class="connection-item">50% also: Opposition to Political Interference in Scientific and Grantmaking Roles</div><div class="connection-item">50% also: Support for Executive Authority and Accountability via Schedule F</div>
                    </div>
                </div>
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(4)">
                        <span class="stance-count">2</span>
                        <span class="stance-name">Support for Executive Authority and Accountability via Schedule F</span>
                        <span class="expand-icon" id="icon-4">▼</span>
                    </div>
                    <div class="stance-details" id="details-4" style="display: none;">
                        <div class="connection-item">50% also: Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <style>
        .expandable-stances {
            display: grid;
            gap: 12px;
        }
        
        .expandable-stance-card {
            background: white;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .stance-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .stance-header:hover {
            background-color: #f8f9fa;
        }
        
        .stance-count {
            font-size: 1.6em;
            font-weight: bold;
            color: #2c3e50;
            min-width: 80px;
            flex-shrink: 0;
        }
        
        .stance-name {
            font-size: 1em;
            color: #2c3e50;
            line-height: 1.3;
            font-weight: 500;
            flex-grow: 1;
        }
        
        .expand-icon {
            font-size: 1.2em;
            color: #7f8c8d;
            transition: transform 0.3s;
            flex-shrink: 0;
        }
        
        .expand-icon.expanded {
            transform: rotate(180deg);
        }
        
        .stance-details {
            padding: 0 15px 15px 15px;
            border-top: 1px solid #ecf0f1;
            background: #f8f9fa;
        }
        
        .connection-item {
            padding: 8px 10px;
            margin: 8px 0;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #e67e22;
            font-size: 0.9em;
            color: #2c3e50;
        }
        
        .no-connections {
            padding: 15px;
            text-align: center;
            color: #888;
            font-style: italic;
        }
        </style>
        
        <script>
        function toggleStanceDetails(index) {
            const details = document.getElementById('details-' + index);
            const icon = document.getElementById('icon-' + index);
            
            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
                icon.classList.add('expanded');
            } else {
                details.style.display = 'none';
                icon.classList.remove('expanded');
            }
        }
        </script>

        <!-- Comments Table -->
        <div class="section">
            <h2>Comments</h2>
            <div class="table-controls">
                <button class="clear-filters" onclick="clearAllFilters()">Clear All Filters</button>
                <div class="column-visibility-dropdown">
                    <button class="show-hide-columns" onclick="toggleColumnVisibility()">Show/Hide Columns</button>
                    <div class="column-visibility-content" id="columnVisibilityDropdown">
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-0" checked onchange="toggleColumn(0)">
                            <label for="col-0">Comment ID</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-1" checked onchange="toggleColumn(1)">
                            <label for="col-1">Date</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-2" checked onchange="toggleColumn(2)">
                            <label for="col-2">Submitter</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-3" checked onchange="toggleColumn(3)">
                            <label for="col-3">Organization</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-4" checked onchange="toggleColumn(4)">
                            <label for="col-4">Stances</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-5" checked onchange="toggleColumn(5)">
                            <label for="col-5">New Stances</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-6" checked onchange="toggleColumn(6)">
                            <label for="col-6">Comment</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-7" checked onchange="toggleColumn(7)">
                            <label for="col-7">Attachments</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-8" checked onchange="toggleColumn(8)">
                            <label for="col-8">Dup Count</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-9" checked onchange="toggleColumn(9)">
                            <label for="col-9">Dup Ratio</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-10" onchange="toggleColumn(10)">
                            <label for="col-10">Attachment</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-11" onchange="toggleColumn(11)">
                            <label for="col-11">Key Quote (LLM)</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-12" onchange="toggleColumn(12)">
                            <label for="col-12">Rationale (LLM)</label>
                        </div>
                    </div>
                </div>
            </div>
                
            <div style="overflow-x: auto;">
                <table id="commentsTable" class="table table-striped">
                    <thead>
                        <tr>
                            <th class="filterable" data-column="0">
                                Comment ID <span class="filter-arrow" onclick="toggleFilter(0)">▼</span>
                                <div class="filter-dropdown" id="filter-0" style="display: none;">
                                    <input type="text" class="filter-input" data-column="0" placeholder="Filter ID..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th>Date</th>
                            <th class="filterable" data-column="2">
                                Submitter <span class="filter-arrow" onclick="toggleFilter(2)">▼</span>
                                <div class="filter-dropdown" id="filter-2" style="display: none;">
                                    <input type="text" class="filter-input" data-column="2" placeholder="Filter name..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="3">
                                Organization <span class="filter-arrow" onclick="toggleFilter(3)">▼</span>
                                <div class="filter-dropdown" id="filter-3" style="display: none;">
                                    <input type="text" class="filter-input" data-column="3" placeholder="Filter organization..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="4">
                                Stances <span class="filter-arrow" onclick="toggleFilter(4)">▼</span>
                                <div class="filter-dropdown" id="filter-4" style="display: none;"><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Opposition to Political Interference in Scientific and Grantmaking Roles" onchange="filterTable()"> Opposition to Political Interference in Scientific and Grantmaking Roles</label><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Opposition to Politicization of the Civil Service/Schedule F" onchange="filterTable()"> Opposition to Politicization of the Civil Service/Schedule F</label><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)" onchange="filterTable()"> Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</label><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Support for Executive Authority and Accountability via Schedule F" onchange="filterTable()"> Support for Executive Authority and Accountability via Schedule F</label><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)" onchange="filterTable()"> Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)</label>
                                    <hr style="margin: 5px 0;">
                                    <label class="filter-checkbox"><input type="checkbox" data-filter="unusual_combo" value="yes" onchange="filterTable()"> ⚠️ Unusual Combinations</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="5">
                                New Stances <span class="filter-arrow" onclick="toggleFilter(5)">▼</span>
                                <div class="filter-dropdown" id="filter-5" style="display: none;">
                                </div>
                            </th>
                            <th class="filterable" data-column="6">
                                Comment <span class="filter-arrow" onclick="toggleFilter(6)">▼</span>
                                <div class="filter-dropdown" id="filter-6" style="display: none;">
                                    <input type="text" class="filter-input" data-column="6" placeholder="Search comment text..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="7">
                                📎 <span class="filter-arrow" onclick="toggleFilter(7)">▼</span>
                                <div class="filter-dropdown" id="filter-7" style="display: none;">
                                    <label class="filter-checkbox"><input type="checkbox" data-filter="attachments" value="yes" onchange="filterTable()"> With attachments</label>
                                    <label class="filter-checkbox"><input type="checkbox" data-filter="attachments" value="no" onchange="filterTable()"> No attachments</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="8">
                                Dup Count <span class="filter-arrow" onclick="toggleFilter(8)">▼</span>
                                <div class="filter-dropdown" id="filter-8" style="display: none;"><label class="filter-checkbox"><input type="checkbox" data-filter="duplication_count" value="1" onchange="filterTable()"> 1</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="9">
                                Dup Ratio <span class="filter-arrow" onclick="toggleFilter(9)">▼</span>
                                <div class="filter-dropdown" id="filter-9" style="display: none;"><label class="filter-checkbox"><input type="checkbox" data-filter="duplication_ratio" value="1" onchange="filterTable()"> 1:1</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="10" style="display: none;">
                                Attachment <span class="filter-arrow" onclick="toggleFilter(10)">▼</span>
                                <div class="filter-dropdown" id="filter-10" style="display: none;">
                                    <input type="text" class="filter-input" data-column="10" placeholder="Search attachment text..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="11" style="display: none;">
                                Key Quote <span class="filter-arrow" onclick="toggleFilter(11)">▼</span>
                                <div class="filter-dropdown" id="filter-11" style="display: none;">
                                    <input type="text" class="filter-input" data-column="11" placeholder="Search quotes..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="12" style="display: none;">
                                Rationale <span class="filter-arrow" onclick="toggleFilter(12)">▼</span>
                                <div class="filter-dropdown" id="filter-12" style="display: none;">
                                    <input type="text" class="filter-input" data-column="12" placeholder="Search rationale..." onkeyup="filterTable()">
                                </div>
                            </th>
                        </tr>
                    </thead>
                        <tbody>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-24393" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-24393</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="Dear OPM,

I am writing to strongly oppose the proposed rule (Docket ID: OPM-2025-0004, RIN: 3206-AO80) which aims to reclassify certain federal positions. Converting these roles to at-will destroys merit-based service and risks politicization, removing key protections and compromising the integrity of federal employment.">Dear OPM,

I am writing to strongly oppose the proposed rule (Docket ID: OPM-2025-0004, RIN: 3206-AO80) which aims to reclassify certain federal positions. Converting these roles to at-will destroys merit-based service and risks politicization, removing key protections and compromising the integrity...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Converting these roles to at-will destroys merit-based service and risks politicization, removing key protections and compromising the integrity of federal employment.</td>
                                <td style="display: none;">The commenter clearly opposes the reclassification under Schedule F, highlighting concerns about the destruction of merit-based service and risks of politicization, which aligns with the first stance. Additionally, they express apprehension about the loss of key protections and integrity in federal employment, linking to the second stance on worker protections.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-3838" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-3838</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Political Interference in Scientific and Grantmaking Roles</span> <span class="stance-tag">Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="As an experienced government scientific manager, I have often been told that it is difficult to discharge govt employees for performance related issues. What is not stated in the summary is that, in my experience, this has virtually always applied to employees at lower levels, and not to those targeted by this proposed rule making. I concur that there are challenges in the Merit system and in the Civil Service system. I do not agree that these issues will be effectively addressed by this proposed rule">As an experienced government scientific manager, I have often been told that it is difficult to discharge govt employees for performance related issues. What is not stated in the summary is that, in my experience, this has virtually always applied to employees at lower levels, and not to those targe...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">I concur that there are challenges in the Merit system and in the Civil Service system. I do not agree that these issues will be effectively addressed by this proposed rule.</td>
                                <td style="display: none;">The commenter recognizes challenges within the Merit and Civil Service systems but expresses skepticism that the proposed rule will resolve these issues, highlighting a concern about the specific targeting of upper-level employees rather than addressing broader performance-related discharge issues. This reflects opposition to politicization while also acknowledging the need for performance improvements.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-27198" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-27198</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="My name is Ashley and I represent the Alliance for American Leadership, a bipartisan coalition of over 300 national security experts and emerging leaders. I firmly oppose the Office of Personnel Management’s (OPM) proposed reintroduction of “Schedule F.” This proposal threatens vital civil service protections, potentially affecting nearly 12,000 mission-critical civilians at the Department of Defense (DOD).



According to the Congressional Research Service,* this proposed rule could reclassify approximately 11,910 senior-level DOD employees — including 3,300 from the Army, 3,112 from the Navy, 1,592 from the Air Force, and 3,906 from other DOD entities — as at-will political appointees. Many affected individuals occupy GS-14/15 positions, equating in responsibility and authority to O-6 military ranks (Colonel or Navy Captain). These civilian leaders are indispensable to strategic planning, weapons systems acquisition, cyber operations, logistics management, and the development of warfighting doctrine—domains where consistent expertise and impartial judgment are critical.



The Schedule F proposal directly endangers military readiness and operational stability by permitting politically motivated appointees to dismiss or replace these professionals based solely on ideological alignment or perceived political loyalty vice following the standardized Joint Publications issued by the Joint Chiefs of Staff for strategic planning. Such politically-driven turnover threatens the esse... [truncated]">My name is Ashley and I represent the Alliance for American Leadership, a bipartisan coalition of over 300 national security experts and emerging leaders. I firmly oppose the Office of Personnel Management’s (OPM) proposed reintroduction of “Schedule F.” This proposal threatens vital civil service p...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;" class="char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="The Schedule F proposal directly endangers military readiness and operational stability by permitting politically motivated appointees to dismiss or replace these professionals based solely on ideological alignment or perceived political loyalty vice following the standardized Joint Publications issued by the Joint Chiefs of Staff for strategic planning.">The Schedule F proposal directly endangers military readiness and operational stability by permitting politically motivated appointees to dismiss or replace these professionals based solely on ideological alignment or perceived political loyalty vice following the standardized Joint Publications iss...</td>
                                <td style="display: none;">The commenter expresses strong opposition to the Schedule F proposal, arguing that it threatens civil service protections and undermines the impartiality required for military operations. This reflects opposition to the politicization of the civil service and concerns about due process and job security for federal employees.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-13897" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-13897</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Support for Executive Authority and Accountability via Schedule F</span> <span class="stance-tag">Support for Improving Federal Workforce Performance through Easier Removal of Employees (without explicit calls for politicization)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="I strongly support the proposed OPM rule to implement Executive Order 14171 by creating a Schedule Policy/Career category for federal employees in policy-influencing positions.

Opponents have falsely claimed this rule politicizes the civil service. In fact, the rule preserves merit-based hiring and explicitly states that employees are not required to support the President&#039;s views only to implement lawful policy faithfully. This rule is about accountability, not partisanship.

States like Georgia, Florida, and Arizona have already reformed their public workforces to adopt at-will models with no evidence of political abuse. The federal government should follow suit.">I strongly support the proposed OPM rule to implement Executive Order 14171 by creating a Schedule Policy/Career category for federal employees in policy-influencing positions.

Opponents have falsely claimed this rule politicizes the civil service. In fact, the rule preserves merit-based hiring and...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">This rule is about accountability, not partisanship.</td>
                                <td style="display: none;">The commenter expresses strong support for the proposed OPM rule, framing it as a measure for accountability rather than politicization, and argues that it preserves merit-based hiring. Their perspective aligns with supporting executive authority and improving performance through easier removal of workers, as they advocate for adopting similar workforce reforms seen in certain states.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-10383" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-10383</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Political Interference in Scientific and Grantmaking Roles</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview">civil servants should be allowed to remain as nonpartisan experts, rather than loyalists to Trump’s political agenda.</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">civil servants should be allowed to remain as nonpartisan experts, rather than loyalists to Trump’s political agenda.</td>
                                <td style="display: none;">The comment clearly expresses opposition to the politicization of civil service, advocating for the need for civil servants to maintain their nonpartisan status instead of aligning with a political agenda. This highlights a concern for protecting the integrity and professionalism of the federal workforce.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-19090" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-19090</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="Schedule F represents a dangerous threat to our civil service system and undermines the foundation of our government in several critical ways:

    Destroys career expertise and institutional knowledge that is essential for effective government operations
    Replaces merit-based hiring with political loyalty tests, threatening the quality and continuity of public services
    Weakens government accountability by removing protections for employees who report waste, fraud, or abuse
    Creates a more partisan and less effective government that serves political interests rather than the public good

The nonpartisan civil service has served America well for over a century, ensuring that government functions professionally regardless of which party holds power. Schedule F would dismantle this system, leading to increased corruption, decreased efficiency, and the politicization of government services that all Americans rely on.

We should protect our professional civil service rather than turning the clock back to the spoils system that once plagued our government.">Schedule F represents a dangerous threat to our civil service system and undermines the foundation of our government in several critical ways:

    Destroys career expertise and institutional knowledge that is essential for effective government operations
    Replaces merit-based hiring with politic...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Schedule F represents a dangerous threat to our civil service system and undermines the foundation of our government in several critical ways.</td>
                                <td style="display: none;">The comment clearly expresses strong opposition to Schedule F, emphasizing the risks of politicizing the civil service and undermining merit-based hiring. It highlights concerns about the loss of expertise and due process rights, solidifying the stances related to the protection of a nonpartisan civil service and its importance in maintaining effective government operations.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-20915" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-20915</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview">See attached file(s)</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">The reintroduction of Schedule F undermines the independence and professionalism of the federal workforce and leads to the potential for politically motivated firings that threaten our democratic processes.</td>
                                <td style="display: none;">The comment clearly expresses opposition to the reimplementation of Schedule F due to concerns about politicization and the independence of civil servants. It also emphasizes the importance of due process and protections for federal employees, indicating a fear of arbitrary dismissals.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-4438" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-4438</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Support for Executive Authority and Accountability via Schedule F</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="I support President Trump’s efforts to bring accountability to the federal bureaucracy. 


For too long, unelected career bureaucrats in the federal government have stifled efficiency by undermining the plans and policies of the Chief Executive.

OPM’s new rule cuts red tape and allows career bureaucrats to be reprimanded for poor job performance or misconduct, such as corruption or partisanship.

In any industry, rogue employees are held accountable to someone. Now, government employees will be held accountable for lack of performance or inaction.


I support President Trump’s work to rein in unaccountable bureaucrats and end the Deep State!
">I support President Trump’s efforts to bring accountability to the federal bureaucracy. 


For too long, unelected career bureaucrats in the federal government have stifled efficiency by undermining the plans and policies of the Chief Executive.

OPM’s new rule cuts red tape and allows career bureau...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">I support President Trump’s efforts to bring accountability to the federal bureaucracy.</td>
                                <td style="display: none;">The comment clearly expresses support for President Trump’s actions aimed at increasing accountability within the federal bureaucratic system, therefore aligning with the stance that supports executive authority and accountability through the implementation of Schedule F.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-1607" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-1607</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="Agency name:  Office of Personnel Management,
Docket ID: OPM-2025-0004
RIN 3206-AO80

I object to this proposed rule.  The country depends on a competent civil service with experienced personnel to help advance the economy of the country and the health of its people.  Nothing should be done by any Administration, whether it be led by a Republican or a Democratic  President, to facilitate a politically motivated mass loss of experienced civil servants.  The proposed rule would have that effect, by design.  Therefore, it should not be issued. 

David Brody ">Agency name:  Office of Personnel Management,
Docket ID: OPM-2025-0004
RIN 3206-AO80

I object to this proposed rule.  The country depends on a competent civil service with experienced personnel to help advance the economy of the country and the health of its people.  Nothing should be done by any A...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Nothing should be done by any Administration, whether it be led by a Republican or a Democratic President, to facilitate a politically motivated mass loss of experienced civil servants.</td>
                                <td style="display: none;">The commenter opposes the proposed rule for its potential to politically undermine the civil service by facilitating a loss of experienced personnel, emphasizing the importance of a competent, nonpartisan workforce. This aligns directly with concerns about politicization and the erosion of worker protections.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-18507" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-18507</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="The proposed rule of the Office of Personnel Management (OPM) is a harmful sinister plot to create a civil service workforce based on cronyism and composed of sycophants. Removal of civil servants due to poor performance and misconduct is an excuse. It is a cunning excuse because no tax payer and a professional like me will tolerate a subpar and incompetent civil servant or somebody engaged in misconduct unless he/she works for the current President&#039;s cabinet! Why are these supervisors not coming forward to document their difficulties in removing employees for poor performance and misconduct? OPM has bunch of tools to do just that. May be these supervisors are themselves incompetent and politically affiliated partisan individuals. They do not want to be bothered or delayed by &quot;due process&quot; that an individual must get. Schedule F violates the Civil Service Reform Act. I strongly disagree with Schedule F. Congress must stop Schedule F. Politicizing the civil service undermines Americans&#039; faith in the Government and its operations. Managing and handling employees in the Schedule F model may work in the business of Mr. Trump, Mr. Bezo, Mr. Musk and other billionaires. Our Government is not a profit making enterprise where few individuals become billionaires. This proposed rule of OPM must not be allowed to take effect in managing our civil service employees. Our civil service must stay a merit based, nonpartisan professionals and experts who are dedicated and loyal to constitutio... [truncated]">The proposed rule of the Office of Personnel Management (OPM) is a harmful sinister plot to create a civil service workforce based on cronyism and composed of sycophants. Removal of civil servants due to poor performance and misconduct is an excuse. It is a cunning excuse because no tax payer and a ...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">This proposed rule of OPM must not be allowed to take effect in managing our civil service employees. Our civil service must stay a merit based, nonpartisan professionals and experts who are dedicated and loyal to constitution, democracy and the rule of law.</td>
                                <td style="display: none;">The commenter explicitly opposes the proposed Schedule F rule, describing it as a harmful plot that undermines merit-based civil service and promotes cronyism. They also emphasize concerns over due process for civil servants, highlighting the importance of protections against arbitrary dismissal and the need for a nonpartisan workforce.</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Meta Information -->
        <div class="meta-info">
            <h3 style="color: white; margin-bottom: 20px;">📋 Report Details</h3>
            <div class="meta-grid">
                <div class="meta-item">
                    <div class="meta-label">Generated</div>
                    <div class="meta-value">2025-06-28 20:32:30</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Model Used</div>
                    <div class="meta-value">gpt-4o-mini</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Total Comments</div>
                    <div class="meta-value">10</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">With Attachments</div>
                    <div class="meta-value">0</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Average Length</div>
                    <div class="meta-value">850 chars</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Date Range</div>
                    <div class="meta-value">2025-06-28</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Column visibility state (13 columns with new_stances)
        const columnVisibility = {
            0: true, 1: true, 2: true, 3: true, 4: true, 5: true, 6: true, 7: true, 8: true, 9: true, 10: false, 11: false, 12: false
        };

        // Initialize column visibility on page load
        document.addEventListener('DOMContentLoaded', function() {
            for (const [col, visible] of Object.entries(columnVisibility)) {
                updateColumnVisibility(parseInt(col), visible);
                // Also update the checkbox state
                const checkbox = document.getElementById('col-' + col);
                if (checkbox) {
                    checkbox.checked = visible;
                }
            }
        });

        function toggleColumnVisibility() {
            const dropdown = document.getElementById('columnVisibilityDropdown');
            dropdown.classList.toggle('show');
        }

        function toggleColumn(columnIndex) {
            const checkbox = document.getElementById('col-' + columnIndex);
            const visible = checkbox.checked;
            columnVisibility[columnIndex] = visible;
            updateColumnVisibility(columnIndex, visible);
        }

        function updateColumnVisibility(columnIndex, visible) {
            const table = document.getElementById('commentsTable');
            const rows = table.getElementsByTagName('tr');
            
            // Update header
            const headers = rows[0].getElementsByTagName('th');
            if (headers[columnIndex]) {
                headers[columnIndex].style.display = visible ? '' : 'none';
            }
            
            // Update all data rows
            for (let i = 1; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                if (cells[columnIndex]) {
                    cells[columnIndex].style.display = visible ? '' : 'none';
                }
            }
        }

        function filterTable() {
            const table = document.getElementById('commentsTable');
            const rows = table.getElementsByTagName('tr');
            
            // Get text input filters
            const textFilters = document.querySelectorAll('.filter-input');
            const textFilterValues = Array.from(textFilters).map(filter => {
                return {
                    column: parseInt(filter.getAttribute('data-column')),
                    value: filter.value.toLowerCase()
                };
            });
            
            // Get checkbox filters
            const stanceCheckboxes = document.querySelectorAll('input[data-filter="stances"]:checked');
            const newStanceCheckboxes = document.querySelectorAll('input[data-filter="new_stances"]:checked');
            const unusualComboCheckboxes = document.querySelectorAll('input[data-filter="unusual_combo"]:checked');
            const attachmentCheckboxes = document.querySelectorAll('input[data-filter="attachments"]:checked');
            const duplicationCountCheckboxes = document.querySelectorAll('input[data-filter="duplication_count"]:checked');
            const duplicationRatioCheckboxes = document.querySelectorAll('input[data-filter="duplication_ratio"]:checked');
            
            const selectedStances = Array.from(stanceCheckboxes).map(cb => cb.value.toLowerCase());
            const selectedNewStances = Array.from(newStanceCheckboxes).map(cb => cb.value.toLowerCase());
            const filterUnusualCombos = unusualComboCheckboxes.length > 0;
            const selectedAttachments = Array.from(attachmentCheckboxes).map(cb => cb.value);
            const selectedDuplicationCounts = Array.from(duplicationCountCheckboxes).map(cb => parseInt(cb.value));
            const selectedDuplicationRatios = Array.from(duplicationRatioCheckboxes).map(cb => parseInt(cb.value));

            // Always assume new_stances column exists (column 5)
            const hasNewStances = true;
            
            // Filter each row
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const cells = row.getElementsByTagName('td');
                let showRow = true;

                // Check text filters
                for (const filter of textFilterValues) {
                    if (filter.value && filter.column < cells.length) {
                        const cellText = cells[filter.column].textContent.toLowerCase();
                        if (!cellText.includes(filter.value)) {
                            showRow = false;
                            break;
                        }
                    }
                }
                
                // Check stance filter (column 4)
                if (showRow && selectedStances.length > 0) {
                    const stanceText = cells[4].textContent.toLowerCase();
                    if (!selectedStances.some(stance => stanceText.includes(stance))) {
                        showRow = false;
                    }
                }
                
                // Check unusual combination filter
                if (showRow && filterUnusualCombos) {
                    const stanceCell = cells[4].innerHTML;
                    if (!stanceCell.includes('⚠️')) {
                        showRow = false;
                    }
                }
                
                // Check new stance filter (column 5 if exists)
                if (showRow && hasNewStances && selectedNewStances.length > 0) {
                    const newStanceText = cells[5].textContent.toLowerCase();
                    if (!selectedNewStances.some(stance => newStanceText.includes(stance))) {
                        showRow = false;
                    }
                }
                
                // Column positions shift by 1 when new_stances exists
                const attachmentCol = hasNewStances ? 7 : 6;
                const dupCountCol = hasNewStances ? 8 : 7;
                const dupRatioCol = hasNewStances ? 9 : 8;
                
                // Check attachments filter
                if (showRow && selectedAttachments.length > 0) {
                    const attachmentCell = cells[attachmentCol];
                    const hasAttachment = attachmentCell.textContent.trim() !== '';
                    
                    let attachmentMatch = false;
                    for (const filter of selectedAttachments) {
                        if (filter === 'yes' && hasAttachment) {
                            attachmentMatch = true;
                            break;
                        }
                        if (filter === 'no' && !hasAttachment) {
                            attachmentMatch = true;
                            break;
                        }
                    }
                    
                    if (!attachmentMatch) {
                        showRow = false;
                    }
                }
                
                // Check duplication count filter
                if (showRow && selectedDuplicationCounts.length > 0) {
                    const duplicationCell = cells[dupCountCol];
                    const duplicationText = duplicationCell.textContent.trim();
                    const duplicationCount = parseInt(duplicationText);
                    
                    if (!selectedDuplicationCounts.includes(duplicationCount)) {
                        showRow = false;
                    }
                }
                
                // Check duplication ratio filter
                if (showRow && selectedDuplicationRatios.length > 0) {
                    const ratioCell = cells[dupRatioCol];
                    const ratioText = ratioCell.textContent.trim();
                    // Extract number after "1:" (e.g., "1:10" -> 10)
                    const ratioMatch = ratioText.match(/1:(\d+)/);
                    const ratioValue = ratioMatch ? parseInt(ratioMatch[1]) : 1;
                    
                    if (!selectedDuplicationRatios.includes(ratioValue)) {
                        showRow = false;
                    }
                }

                row.style.display = showRow ? '' : 'none';
            }
        }
        
        function toggleFilter(columnIndex) {
            const dropdown = document.getElementById('filter-' + columnIndex);
            const allDropdowns = document.querySelectorAll('.filter-dropdown');
            
            // Close all other dropdowns
            allDropdowns.forEach(dd => {
                if (dd !== dropdown) {
                    dd.style.display = 'none';
                }});
            
            // Toggle current dropdown
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }
        
        function clearAllFilters() {
            const textFilters = document.querySelectorAll('.filter-input');
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            
            textFilters.forEach(filter => filter.value = '');
            checkboxes.forEach(checkbox => checkbox.checked = false);
            
            filterTable();
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const isFilterClick = event.target.closest('.filterable') || event.target.closest('.filter-dropdown');
            const isColumnVisClick = event.target.closest('.column-visibility-dropdown');
            
            if (!isFilterClick) {
                document.querySelectorAll('.filter-dropdown').forEach(dd => {
                    dd.style.display = 'none';
                });
            }
            
            if (!isColumnVisClick) {
                document.getElementById('columnVisibilityDropdown').classList.remove('show');
            }
        });
        
        // Initialize Bootstrap tooltips
        function initializeTooltips() {
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            [...tooltipTriggerList].forEach(tooltipTriggerEl => {
                try {
                    // Dispose existing tooltip if any
                    const existingTooltip = bootstrap.Tooltip.getInstance(tooltipTriggerEl);
                    if (existingTooltip) {
                        existingTooltip.dispose();
                    }
                    
                    // Create new tooltip
                    new bootstrap.Tooltip(tooltipTriggerEl, {
                        boundary: document.body,
                        trigger: 'hover focus',
                        container: 'body'
                    });
                } catch (err) {
                    console.error('Error initializing tooltip:', err);
                }
            });
        }
        
        // Initialize tooltips when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTooltips();
        });
    </script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
