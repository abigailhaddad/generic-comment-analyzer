<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regulation Comments Analysis - Comment Analysis Report</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.5;
            background: #f8f9fa;
            color: #333;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .section {
            background: white;
            margin: 30px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }
        
        .filters-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #dee2e6;
        }
        
        .filters-header {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .filter-label {
            font-weight: 500;
            color: #333;
            font-size: 0.9em;
        }
        
        .filterable {
            position: relative;
            cursor: pointer;
        }
        
        .filter-arrow {
            float: right;
            font-size: 12px;
            color: #666;
            margin-left: 8px;
            user-select: none;
        }
        
        .filter-arrow:hover {
            color: #007bff;
        }
        
        .filter-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            padding: 10px;
            min-width: 200px;
        }
        
        .filter-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .filter-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 1px rgba(0,123,255,0.25);
        }
        
        .filter-checkbox {
            display: block;
            margin: 5px 0;
            font-size: 13px;
            cursor: pointer;
        }
        
        .filter-checkbox input {
            margin-right: 6px;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
        }
        
        .checkbox-item input[type="checkbox"] {
            margin: 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        th {
            background: #e9ecef;
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 10px 8px;
            border-bottom: 1px solid #dee2e6;
            vertical-align: top;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e3f2fd;
        }
        
        .stance-for {
            background: #28a745;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stance-against {
            background: #dc3545;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stance-neutral {
            background: #ffc107;
            color: #212529;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stance-unknown {
            background: #6c757d;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .stances-container {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            max-width: 300px;
        }
        
        .stance-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            border: 1px solid #bbdefb;
        }
        
        .text-preview {
            max-width: 300px;
            max-height: 100px;
            overflow: hidden;
            font-size: 12px;
        }
        
        .comment-id {
            font-family: monospace;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .comment-id a:hover {
            color: #0056b3 !important;
            background-color: #e3f2fd;
        }
        
        .date-cell {
            white-space: nowrap;
            font-size: 12px;
        }
        
        .attachment-indicator {
            font-size: 16px;
            color: #28a745;
        }
        
        .unique-indicator {
            background: #28a745;
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .duplicate-indicator {
            background: #ffc107;
            color: #212529;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .meta-info {
            background: #343a40;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .meta-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .meta-label {
            font-size: 0.8em;
            opacity: 0.8;
        }
        
        .meta-value {
            font-weight: 600;
        }
        
        
        .clear-filters {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        
        .clear-filters:hover {
            background: #c82333;
        }
        
        .show-hide-columns {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        
        .show-hide-columns:hover {
            background: #0056b3;
        }
        
        .column-visibility-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .column-visibility-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 250px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1000;
            border-radius: 4px;
            padding: 10px;
            border: 1px solid #ddd;
            top: 100%;
            left: 0;
        }
        
        .column-visibility-content.show {
            display: block;
        }
        
        .column-visibility-item {
            display: flex;
            align-items: center;
            padding: 5px 0;
            gap: 8px;
        }
        
        .column-visibility-item input[type="checkbox"] {
            margin: 0;
        }
        
        .column-visibility-item label {
            cursor: pointer;
            font-size: 14px;
            margin: 0;
        }
        
        .char-limited {
            cursor: help;
        }
        
        /* Custom tooltip styling for wider tooltips */
        .tooltip .tooltip-inner {
            max-width: 600px !important;
            width: auto !important;
            text-align: left !important;
            font-size: 13px !important;
            line-height: 1.4 !important;
            padding: 8px 12px !important;
        }
        
        /* Allow table to be wider and let columns size naturally */
        table {
            width: 100%;
            table-layout: auto;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        /* Only constrain the comment column to prevent it from being too wide */
        th[data-column="5"] {
            width: 25%;
            max-width: 400px;
        }
        
        .text-preview {
            max-width: 400px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        /* Co-occurrence table styles */
        .cooccurrence-table {
            border-collapse: collapse;
            font-size: 12px;
            margin: 0 auto;
        }
        
        .cooccurrence-table th,
        .cooccurrence-table td {
            border: 1px solid #dee2e6;
            text-align: center;
            padding: 8px;
            min-width: 40px;
        }
        
        .cooccurrence-table .stance-label {
            text-align: left;
            font-weight: 500;
            max-width: 200px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .rotate-header {
            height: 150px;
            white-space: nowrap;
            vertical-align: bottom;
        }
        
        .rotate-header > div {
            transform: translate(15px, 65px) rotate(-45deg);
            width: 30px;
            transform-origin: bottom left;
            font-size: 11px;
            font-weight: 500;
        }
        
        .diagonal-cell {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #333;
        }
        
        .cooccurrence-cell {
            color: #333;
            font-weight: 500;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Regulation Comments Analysis</h1>
            <div class="subtitle">Analysis of public comments on federal regulation</div>
            
        </div>
        
        <!-- Summary Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">10</div>
                <div class="stat-label">Total Comments</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">0</div>
                <div class="stat-label">With Attachments</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">797</div>
                <div class="stat-label">Avg. Characters</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">2025-06-28</div>
                <div class="stat-label">Date Range</div>
            </div>
        </div>


        <!-- Analysis Field Distributions -->
        
        <div class="section">
            <h2>📊 Stances Distribution</h2>
            <p style="color: #666; margin-bottom: 20px; font-style: italic;">Click on any stance to see how it relates to others</p>
            <div class="expandable-stances">
                
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(0)">
                        <span class="stance-count">10</span>
                        <span class="stance-name">Opposition to Politicization of the Civil Service/Schedule F</span>
                        <span class="expand-icon" id="icon-0">▼</span>
                    </div>
                    <div class="stance-details" id="details-0" style="display: none;">
                        <div class="connection-item">50% also: Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</div><div class="connection-item">40% also: Opposition to Political Interference in Scientific and Grantmaking Roles</div>
                    </div>
                </div>
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(1)">
                        <span class="stance-count">5</span>
                        <span class="stance-name">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span>
                        <span class="expand-icon" id="icon-1">▼</span>
                    </div>
                    <div class="stance-details" id="details-1" style="display: none;">
                        <div class="connection-item">100% also: Opposition to Politicization of the Civil Service/Schedule F</div>
                    </div>
                </div>
                <div class="expandable-stance-card">
                    <div class="stance-header" onclick="toggleStanceDetails(2)">
                        <span class="stance-count">4</span>
                        <span class="stance-name">Opposition to Political Interference in Scientific and Grantmaking Roles</span>
                        <span class="expand-icon" id="icon-2">▼</span>
                    </div>
                    <div class="stance-details" id="details-2" style="display: none;">
                        <div class="connection-item">100% also: Opposition to Politicization of the Civil Service/Schedule F</div>
                    </div>
                </div>
            </div>
        </div>
        
        <style>
        .expandable-stances {
            display: grid;
            gap: 12px;
        }
        
        .expandable-stance-card {
            background: white;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .stance-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .stance-header:hover {
            background-color: #f8f9fa;
        }
        
        .stance-count {
            font-size: 1.6em;
            font-weight: bold;
            color: #2c3e50;
            min-width: 80px;
            flex-shrink: 0;
        }
        
        .stance-name {
            font-size: 1em;
            color: #2c3e50;
            line-height: 1.3;
            font-weight: 500;
            flex-grow: 1;
        }
        
        .expand-icon {
            font-size: 1.2em;
            color: #7f8c8d;
            transition: transform 0.3s;
            flex-shrink: 0;
        }
        
        .expand-icon.expanded {
            transform: rotate(180deg);
        }
        
        .stance-details {
            padding: 0 15px 15px 15px;
            border-top: 1px solid #ecf0f1;
            background: #f8f9fa;
        }
        
        .connection-item {
            padding: 8px 10px;
            margin: 8px 0;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #e67e22;
            font-size: 0.9em;
            color: #2c3e50;
        }
        
        .no-connections {
            padding: 15px;
            text-align: center;
            color: #888;
            font-style: italic;
        }
        </style>
        
        <script>
        function toggleStanceDetails(index) {
            const details = document.getElementById('details-' + index);
            const icon = document.getElementById('icon-' + index);
            
            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
                icon.classList.add('expanded');
            } else {
                details.style.display = 'none';
                icon.classList.remove('expanded');
            }
        }
        </script>

        <!-- Comments Table -->
        <div class="section">
            <h2>Comments</h2>
            <div class="table-controls">
                <button class="clear-filters" onclick="clearAllFilters()">Clear All Filters</button>
                <div class="column-visibility-dropdown">
                    <button class="show-hide-columns" onclick="toggleColumnVisibility()">Show/Hide Columns</button>
                    <div class="column-visibility-content" id="columnVisibilityDropdown">
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-0" checked onchange="toggleColumn(0)">
                            <label for="col-0">Comment ID</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-1" checked onchange="toggleColumn(1)">
                            <label for="col-1">Date</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-2" checked onchange="toggleColumn(2)">
                            <label for="col-2">Submitter</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-3" checked onchange="toggleColumn(3)">
                            <label for="col-3">Organization</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-4" checked onchange="toggleColumn(4)">
                            <label for="col-4">Stances</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-5" checked onchange="toggleColumn(5)">
                            <label for="col-5">New Stances</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-6" checked onchange="toggleColumn(6)">
                            <label for="col-6">Comment</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-7" checked onchange="toggleColumn(7)">
                            <label for="col-7">Attachments</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-8" checked onchange="toggleColumn(8)">
                            <label for="col-8">Dup Count</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-9" checked onchange="toggleColumn(9)">
                            <label for="col-9">Dup Ratio</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-10" onchange="toggleColumn(10)">
                            <label for="col-10">Attachment</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-11" onchange="toggleColumn(11)">
                            <label for="col-11">Key Quote (LLM)</label>
                        </div>
                        <div class="column-visibility-item">
                            <input type="checkbox" id="col-12" onchange="toggleColumn(12)">
                            <label for="col-12">Rationale (LLM)</label>
                        </div>
                    </div>
                </div>
            </div>
                
            <div style="overflow-x: auto;">
                <table id="commentsTable" class="table table-striped">
                    <thead>
                        <tr>
                            <th class="filterable" data-column="0">
                                Comment ID <span class="filter-arrow" onclick="toggleFilter(0)">▼</span>
                                <div class="filter-dropdown" id="filter-0" style="display: none;">
                                    <input type="text" class="filter-input" data-column="0" placeholder="Filter ID..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th>Date</th>
                            <th class="filterable" data-column="2">
                                Submitter <span class="filter-arrow" onclick="toggleFilter(2)">▼</span>
                                <div class="filter-dropdown" id="filter-2" style="display: none;">
                                    <input type="text" class="filter-input" data-column="2" placeholder="Filter name..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="3">
                                Organization <span class="filter-arrow" onclick="toggleFilter(3)">▼</span>
                                <div class="filter-dropdown" id="filter-3" style="display: none;">
                                    <input type="text" class="filter-input" data-column="3" placeholder="Filter organization..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="4">
                                Stances <span class="filter-arrow" onclick="toggleFilter(4)">▼</span>
                                <div class="filter-dropdown" id="filter-4" style="display: none;"><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Opposition to Political Interference in Scientific and Grantmaking Roles" onchange="filterTable()"> Opposition to Political Interference in Scientific and Grantmaking Roles</label><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Opposition to Politicization of the Civil Service/Schedule F" onchange="filterTable()"> Opposition to Politicization of the Civil Service/Schedule F</label><label class="filter-checkbox"><input type="checkbox" data-filter="stances" value="Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)" onchange="filterTable()"> Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</label>
                                    <hr style="margin: 5px 0;">
                                    <label class="filter-checkbox"><input type="checkbox" data-filter="unusual_combo" value="yes" onchange="filterTable()"> ⚠️ Unusual Combinations</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="5">
                                New Stances <span class="filter-arrow" onclick="toggleFilter(5)">▼</span>
                                <div class="filter-dropdown" id="filter-5" style="display: none;">
                                </div>
                            </th>
                            <th class="filterable" data-column="6">
                                Comment <span class="filter-arrow" onclick="toggleFilter(6)">▼</span>
                                <div class="filter-dropdown" id="filter-6" style="display: none;">
                                    <input type="text" class="filter-input" data-column="6" placeholder="Search comment text..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="7">
                                📎 <span class="filter-arrow" onclick="toggleFilter(7)">▼</span>
                                <div class="filter-dropdown" id="filter-7" style="display: none;">
                                    <label class="filter-checkbox"><input type="checkbox" data-filter="attachments" value="yes" onchange="filterTable()"> With attachments</label>
                                    <label class="filter-checkbox"><input type="checkbox" data-filter="attachments" value="no" onchange="filterTable()"> No attachments</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="8">
                                Dup Count <span class="filter-arrow" onclick="toggleFilter(8)">▼</span>
                                <div class="filter-dropdown" id="filter-8" style="display: none;"><label class="filter-checkbox"><input type="checkbox" data-filter="duplication_count" value="1" onchange="filterTable()"> 1</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="9">
                                Dup Ratio <span class="filter-arrow" onclick="toggleFilter(9)">▼</span>
                                <div class="filter-dropdown" id="filter-9" style="display: none;"><label class="filter-checkbox"><input type="checkbox" data-filter="duplication_ratio" value="1" onchange="filterTable()"> 1:1</label>
                                </div>
                            </th>
                            <th class="filterable" data-column="10" style="display: none;">
                                Attachment <span class="filter-arrow" onclick="toggleFilter(10)">▼</span>
                                <div class="filter-dropdown" id="filter-10" style="display: none;">
                                    <input type="text" class="filter-input" data-column="10" placeholder="Search attachment text..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="11" style="display: none;">
                                Key Quote <span class="filter-arrow" onclick="toggleFilter(11)">▼</span>
                                <div class="filter-dropdown" id="filter-11" style="display: none;">
                                    <input type="text" class="filter-input" data-column="11" placeholder="Search quotes..." onkeyup="filterTable()">
                                </div>
                            </th>
                            <th class="filterable" data-column="12" style="display: none;">
                                Rationale <span class="filter-arrow" onclick="toggleFilter(12)">▼</span>
                                <div class="filter-dropdown" id="filter-12" style="display: none;">
                                    <input type="text" class="filter-input" data-column="12" placeholder="Search rationale..." onkeyup="filterTable()">
                                </div>
                            </th>
                        </tr>
                    </thead>
                        <tbody>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-15502" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-15502</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="As a concerned citizen, I strongly oppose the proposed changes that would weaken the competitive hiring rules for career federal employees. These rules are in place to ensure that federal jobs are awarded based on merit, not political or ideological loyalty. Undermining this system could open the door to politicizing the civil service, threatening the neutrality and professionalism that are essential for a well-functioning government.

Career civil servants are the backbone of federal agencies, providing stability and continuity across changing administrations. They are not political appointees—they are skilled professionals who carry out the law and serve the public regardless of who is in office. Allowing broader reasons for dismissal and making it easier to replace them with politically aligned individuals could erode public trust and damage the long-term effectiveness of federal programs.

This proposal risks allowing fringe ideologies, including religious extremism, to influence federal policy and practice in ways that could discriminate against Americans who don’t share those beliefs. Our government must remain secular and fair in its service to all citizens. I urge the Office of Personnel Management to protect the integrity of the civil service by rejecting this proposed rule.">As a concerned citizen, I strongly oppose the proposed changes that would weaken the competitive hiring rules for career federal employees. These rules are in place to ensure that federal jobs are awarded based on merit, not political or ideological loyalty. Undermining this system could open the do...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Undermining this system could open the door to politicizing the civil service, threatening the neutrality and professionalism that are essential for a well-functioning government.</td>
                                <td style="display: none;">The commenter explicitly opposes the proposed changes for undermining merit-based hiring rules and expresses concerns about the potential politicization of the civil service, which threatens its professionalism and neutrality. Additionally, they emphasize the need for protections and the stability provided by career civil servants, aligning with concerns about due process and worker protections.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-25734" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-25734</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Political Interference in Scientific and Grantmaking Roles</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="I strongly object to proposed changes in Schedule F that would reclassify jobs within the NIH as political appointees rather than civil service protection (where jobs are filled based on expertise and experience). A key strength of the NIH is its political neutrality. It is essential that the critical jobs of determining how best to invest public dollars in biomedicine (including drafting funding opportunity announcements, evaluating grant applications, and recommending or selecting grant recipients) continue to be conducted by career scientists - those who are seeking to ensure the best science is funded. Countries that conflate science policy and grant awards with political policy (including China, Russia, and Singapore) have invariably failed to fund the best science and wasted money on poor-quality research, as well as hampering the development of a robust biotechnology industry. The biomedical enterprise and biotechnology industry in the United States is currently the envy of the world; the changes proposed in Schedule F of this Federal Registrar would immediately and irrevocable undermine these achievements. I urge the administration NOT to reclassify scientists as policymakers -- these positions should remain filled by those best able to evaluate the science for its own sake, outside of political influence. US leadership in biotechnology is greatly imperiled by this proposal.
 
">I strongly object to proposed changes in Schedule F that would reclassify jobs within the NIH as political appointees rather than civil service protection (where jobs are filled based on expertise and experience). A key strength of the NIH is its political neutrality. It is essential that the critic...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">I urge the administration NOT to reclassify scientists as policymakers -- these positions should remain filled by those best able to evaluate the science for its own sake, outside of political influence.</td>
                                <td style="display: none;">The commenter clearly opposes the proposed Schedule F changes as it would politicize NIH positions, compromising their expertise and neutrality. Additionally, the comment emphasizes the necessity of protecting scientific integrity from political influence, directly addressing the impact of Schedule F on grantmaking and policy in biomedicine.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-24325" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-24325</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="Civil servants are non partisan and permanent positions for a reason. They earned their positions and were hired on merit. Installing political appointee loyalists to fire anyone who hurt the president’s feelings or disagrees with the president is an affront to democracy and the valuable work of our public servants. ">Civil servants are non partisan and permanent positions for a reason. They earned their positions and were hired on merit. Installing political appointee loyalists to fire anyone who hurt the president’s feelings or disagrees with the president is an affront to democracy and the valuable work of our...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Installing political appointee loyalists to fire anyone who hurt the president’s feelings or disagrees with the president is an affront to democracy and the valuable work of our public servants.</td>
                                <td style="display: none;">The commenter explicitly opposes politicization of civil service roles by emphasizing the importance of merit-based, nonpartisan positions and expresses concern over the arbitrary dismissal of employees based on political loyalty. This highlights a clear stance against undermining the professionalism and protections traditionally afforded to federal employees.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-24422" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-24422</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="If you&#039;ve been around the government long enough you know that more than 90% of regulations are written either because someone (or multiple someone&#039;s) died, or because someone did something so breathtakingly stupid or corrupt that when it turns out it wasn&#039;t against any regulations a regulation is written to make it against own. The Pendleton Civil Service Reform act the regulation was past both due to someone dying and corruption. The Civil Service Reform Act of 1978 further strengthen the nonpartisan Civil Service as it turns out that the people are better served by knowledge employees who don&#039;t change every 4-8 years. 

Schedule F is threating to undo all of this, and make the government more inefficient due to mass changes every few years. This negatively impacts the people of the United States who depend on the functioning of the government for critical services. The need for a non-partisan Civil service was learned the hard way thought our history. Please learn from history, say no to schedule F and keep the civil service non-partisan. ">If you've been around the government long enough you know that more than 90% of regulations are written either because someone (or multiple someone's) died, or because someone did something so breathtakingly stupid or corrupt that when it turns out it wasn't against any regulations a regulation is w...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Schedule F is threating to undo all of this, and make the government more inefficient due to mass changes every few years.</td>
                                <td style="display: none;">The commenter expresses clear opposition to Schedule F by highlighting the risks of politicizing the civil service and the negative impact it would have on government efficiency and service delivery. Additionally, they draw on historical context to assert the necessity of a non-partisan civil service, which aligns with concerns over protections and due process for federal employees.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-26529" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-26529</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Political Interference in Scientific and Grantmaking Roles</span> <span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="Grantmaking is a professional skill cultivated with experience and expertise. Even more so, the creation of grant programs, including RFP design, is a programmatic excercise requiring deep practical l subject matter knowledge and experience related to the area of the grant. 

These positions have been ably staffed by programmatic experts across the federal government, under the careful tutelage and oversight of agency leadership - both political and career. 

As a Presidential Administration or Congress directs the creation of and strategic direction of a program, career, programmatic staff utilizes their expertise to design programs and grant opportunities that meet the desired objectives. 

This balance serves to provide for both administration oversight &amp; strategic authority and the necessary proximity and experience to implement grant programs that are most impactful and efficient in utilizing tax payer dollars. 

These programmatic, grant making roles should not be converted to political appointments as deep longitudinal knowledge and subject matter expertise would be lost. 

Policy authority and oversight already exists within Agency heads and deputies across all agencies. 





">Grantmaking is a professional skill cultivated with experience and expertise. Even more so, the creation of grant programs, including RFP design, is a programmatic excercise requiring deep practical l subject matter knowledge and experience related to the area of the grant. 

These positions have be...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">These programmatic, grant making roles should not be converted to political appointments as deep longitudinal knowledge and subject matter expertise would be lost.</td>
                                <td style="display: none;">The comment expresses concern about the potential loss of expertise and knowledge if grantmaking positions are converted to political appointments, highlighting the importance of non-partisan, expert involvement in federal grant programs. This reflects a clear opposition to politicization and political interference in roles that require deep expertise.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-28877" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-28877</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Political Interference in Scientific and Grantmaking Roles</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="The scientific integrity of federally-funded research depends on the integrity and expertise of leaders that lead grant assessments and conduct research at the NIH.  The proposed rule would potentially reclassify many NIH employees under &quot;Schedule F&quot;. This change would potentially increase the turnover of leaders at NIH charged with evaluating and guiding research. This will greatly limit their ability for long-term planning and execution and will insert political interference into functions such as grant assessment and research that by definition need to remain apolitical and driven only by scientific excellence. The NIH is the jewel of US science and is respected around the world, please do not destroy this world-class institution by turning most leaders at the NIH into political appointees. ">The scientific integrity of federally-funded research depends on the integrity and expertise of leaders that lead grant assessments and conduct research at the NIH.  The proposed rule would potentially reclassify many NIH employees under "Schedule F". This change would potentially increase the turno...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">This change would potentially increase the turnover of leaders at NIH charged with evaluating and guiding research... and will insert political interference into functions such as grant assessment and research that by definition need to remain apolitical and driven only by scientific excellence.</td>
                                <td style="display: none;">The comment clearly opposes the politicization of the NIH and emphasizes the importance of maintaining scientific integrity and non-partisan leadership in federally-funded research. It warns that the proposed rule would allow for political appointees to disrupt essential research processes, aligning with the identified stances against both the politicization of civil service and political interference in scientific roles.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-29431" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-29431</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview">See attached file(s)</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">The reclassification of certain positions to 'Schedule F' undermines the merit-based system that ensures continuity and professionalism among federal employees, leading to a chaotic and politically-driven environment that could severely impact governance.</td>
                                <td style="display: none;">The commenter clearly expresses concerns about the risks of politicizing the civil service, highlighting the threat to the independence and professionalism of federal workers. Additionally, the comment emphasizes the potential loss of due process protections, which aligns with the selected stances.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-21148" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-21148</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Political Interference in Scientific and Grantmaking Roles</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="I strongly oppose the proposed rule establishing a new “Schedule Policy/Career” designation. This change threatens the independence and stability of federal scientific agencies like the NIH by allowing for at-will dismissal of career leaders. It risks politicizing science, compromising public health, and eroding trust in nonpartisan, evidence-based leadership. I urge the OPM to withdraw this harmful proposal.">I strongly oppose the proposed rule establishing a new “Schedule Policy/Career” designation. This change threatens the independence and stability of federal scientific agencies like the NIH by allowing for at-will dismissal of career leaders. It risks politicizing science, compromising public health...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">This change threatens the independence and stability of federal scientific agencies like the NIH by allowing for at-will dismissal of career leaders.</td>
                                <td style="display: none;">The comment clearly expresses strong opposition to the proposed rule by highlighting concerns about its impact on the independence and stability of federal scientific agencies, thereby indicating a clear opposition to politicization in the civil service. Additionally, it addresses potential political interference in scientific roles, emphasizing the importance of nonpartisan, evidence-based leadership.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-33695" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-33695</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview">Please stop trying to politicize the civil service. They work for America, not a politician, and should not be protected from partisan politics. </td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">Please stop trying to politicize the civil service. They work for America, not a politician, and should not be protected from partisan politics.</td>
                                <td style="display: none;">The comment clearly expresses opposition to the politicization of the civil service, emphasizing that civil servants serve the country, not individual politicians, and should remain free from partisan influences.</td>
                            </tr>

                            <tr>
                                <td><span class="comment-id"><a href="https://www.regulations.gov/comment/OPM-2025-0004-22168" target="_blank" style="color: #007bff; text-decoration: underline;">OPM-2025-0004-22168</a></span></td>
                                <td class="date-cell">2025-06-28</td>
                                <td></td>
                                <td></td>
                                <td><div class="stances-container"><span class="stance-tag">Opposition to Politicization of the Civil Service/Schedule F</span> <span class="stance-tag">Opposition to Weakening Federal Due Process and Worker Protections (General Civil Service Rights)</span></div></td>
                                <td><span style="color: #999;">None</span></td>
                                <td class="text-preview char-limited" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="false" title="As a concerned citizen, I strongly oppose the proposed changes that would weaken the competitive hiring rules for career federal employees. These rules are in place to ensure that federal jobs are awarded based on merit, not political or ideological loyalty. Undermining this system could open the door to politicizing the civil service, threatening the neutrality and professionalism that are essential for a well-functioning government.

Career civil servants are the backbone of federal agencies, providing stability and continuity across changing administrations. They are not political appointees—they are skilled professionals who carry out the law and serve the public regardless of who is in office. Allowing broader reasons for dismissal and making it easier to replace them with politically aligned individuals could erode public trust and damage the long-term effectiveness of federal programs.

This proposal risks allowing fringe ideologies, including religious extremism, to influence federal policy and practice in ways that could discriminate against Americans who don’t share those beliefs. Our government must remain secular and fair in its service to all citizens. I urge the Office of Personnel Management to protect the integrity of the civil service by rejecting this proposed rule.">As a concerned citizen, I strongly oppose the proposed changes that would weaken the competitive hiring rules for career federal employees. These rules are in place to ensure that federal jobs are awarded based on merit, not political or ideological loyalty. Undermining this system could open the do...</td>
                                <td></td>
                                <td><span class="unique-indicator">1</span></td>
                                <td><span class="unique-indicator">1:1</span></td>
                                <td style="display: none;"></td>
                                <td style="display: none;">These rules are in place to ensure that federal jobs are awarded based on merit, not political or ideological loyalty.</td>
                                <td style="display: none;">The commenter strongly opposes changes that would weaken competitive hiring rules for career federal employees, highlighting the importance of merit-based hiring to prevent politicization of the civil service. Additionally, they express concerns about potential loss of due process and the risks of discrimination from fringe ideologies influencing federal policies.</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Meta Information -->
        <div class="meta-info">
            <h3 style="color: white; margin-bottom: 20px;">📋 Report Details</h3>
            <div class="meta-grid">
                <div class="meta-item">
                    <div class="meta-label">Generated</div>
                    <div class="meta-value">2025-06-28 20:21:47</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Model Used</div>
                    <div class="meta-value">gpt-4o-mini</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Total Comments</div>
                    <div class="meta-value">10</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">With Attachments</div>
                    <div class="meta-value">0</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Average Length</div>
                    <div class="meta-value">797 chars</div>
                </div>
                <div class="meta-item">
                    <div class="meta-label">Date Range</div>
                    <div class="meta-value">2025-06-28</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Column visibility state (13 columns with new_stances)
        const columnVisibility = {
            0: true, 1: true, 2: true, 3: true, 4: true, 5: true, 6: true, 7: true, 8: true, 9: true, 10: false, 11: false, 12: false
        };

        // Initialize column visibility on page load
        document.addEventListener('DOMContentLoaded', function() {
            for (const [col, visible] of Object.entries(columnVisibility)) {
                updateColumnVisibility(parseInt(col), visible);
                // Also update the checkbox state
                const checkbox = document.getElementById('col-' + col);
                if (checkbox) {
                    checkbox.checked = visible;
                }
            }
        });

        function toggleColumnVisibility() {
            const dropdown = document.getElementById('columnVisibilityDropdown');
            dropdown.classList.toggle('show');
        }

        function toggleColumn(columnIndex) {
            const checkbox = document.getElementById('col-' + columnIndex);
            const visible = checkbox.checked;
            columnVisibility[columnIndex] = visible;
            updateColumnVisibility(columnIndex, visible);
        }

        function updateColumnVisibility(columnIndex, visible) {
            const table = document.getElementById('commentsTable');
            const rows = table.getElementsByTagName('tr');
            
            // Update header
            const headers = rows[0].getElementsByTagName('th');
            if (headers[columnIndex]) {
                headers[columnIndex].style.display = visible ? '' : 'none';
            }
            
            // Update all data rows
            for (let i = 1; i < rows.length; i++) {
                const cells = rows[i].getElementsByTagName('td');
                if (cells[columnIndex]) {
                    cells[columnIndex].style.display = visible ? '' : 'none';
                }
            }
        }

        function filterTable() {
            const table = document.getElementById('commentsTable');
            const rows = table.getElementsByTagName('tr');
            
            // Get text input filters
            const textFilters = document.querySelectorAll('.filter-input');
            const textFilterValues = Array.from(textFilters).map(filter => {
                return {
                    column: parseInt(filter.getAttribute('data-column')),
                    value: filter.value.toLowerCase()
                };
            });
            
            // Get checkbox filters
            const stanceCheckboxes = document.querySelectorAll('input[data-filter="stances"]:checked');
            const newStanceCheckboxes = document.querySelectorAll('input[data-filter="new_stances"]:checked');
            const unusualComboCheckboxes = document.querySelectorAll('input[data-filter="unusual_combo"]:checked');
            const attachmentCheckboxes = document.querySelectorAll('input[data-filter="attachments"]:checked');
            const duplicationCountCheckboxes = document.querySelectorAll('input[data-filter="duplication_count"]:checked');
            const duplicationRatioCheckboxes = document.querySelectorAll('input[data-filter="duplication_ratio"]:checked');
            
            const selectedStances = Array.from(stanceCheckboxes).map(cb => cb.value.toLowerCase());
            const selectedNewStances = Array.from(newStanceCheckboxes).map(cb => cb.value.toLowerCase());
            const filterUnusualCombos = unusualComboCheckboxes.length > 0;
            const selectedAttachments = Array.from(attachmentCheckboxes).map(cb => cb.value);
            const selectedDuplicationCounts = Array.from(duplicationCountCheckboxes).map(cb => parseInt(cb.value));
            const selectedDuplicationRatios = Array.from(duplicationRatioCheckboxes).map(cb => parseInt(cb.value));

            // Always assume new_stances column exists (column 5)
            const hasNewStances = true;
            
            // Filter each row
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                const cells = row.getElementsByTagName('td');
                let showRow = true;

                // Check text filters
                for (const filter of textFilterValues) {
                    if (filter.value && filter.column < cells.length) {
                        const cellText = cells[filter.column].textContent.toLowerCase();
                        if (!cellText.includes(filter.value)) {
                            showRow = false;
                            break;
                        }
                    }
                }
                
                // Check stance filter (column 4)
                if (showRow && selectedStances.length > 0) {
                    const stanceText = cells[4].textContent.toLowerCase();
                    if (!selectedStances.some(stance => stanceText.includes(stance))) {
                        showRow = false;
                    }
                }
                
                // Check unusual combination filter
                if (showRow && filterUnusualCombos) {
                    const stanceCell = cells[4].innerHTML;
                    if (!stanceCell.includes('⚠️')) {
                        showRow = false;
                    }
                }
                
                // Check new stance filter (column 5 if exists)
                if (showRow && hasNewStances && selectedNewStances.length > 0) {
                    const newStanceText = cells[5].textContent.toLowerCase();
                    if (!selectedNewStances.some(stance => newStanceText.includes(stance))) {
                        showRow = false;
                    }
                }
                
                // Column positions shift by 1 when new_stances exists
                const attachmentCol = hasNewStances ? 7 : 6;
                const dupCountCol = hasNewStances ? 8 : 7;
                const dupRatioCol = hasNewStances ? 9 : 8;
                
                // Check attachments filter
                if (showRow && selectedAttachments.length > 0) {
                    const attachmentCell = cells[attachmentCol];
                    const hasAttachment = attachmentCell.textContent.trim() !== '';
                    
                    let attachmentMatch = false;
                    for (const filter of selectedAttachments) {
                        if (filter === 'yes' && hasAttachment) {
                            attachmentMatch = true;
                            break;
                        }
                        if (filter === 'no' && !hasAttachment) {
                            attachmentMatch = true;
                            break;
                        }
                    }
                    
                    if (!attachmentMatch) {
                        showRow = false;
                    }
                }
                
                // Check duplication count filter
                if (showRow && selectedDuplicationCounts.length > 0) {
                    const duplicationCell = cells[dupCountCol];
                    const duplicationText = duplicationCell.textContent.trim();
                    const duplicationCount = parseInt(duplicationText);
                    
                    if (!selectedDuplicationCounts.includes(duplicationCount)) {
                        showRow = false;
                    }
                }
                
                // Check duplication ratio filter
                if (showRow && selectedDuplicationRatios.length > 0) {
                    const ratioCell = cells[dupRatioCol];
                    const ratioText = ratioCell.textContent.trim();
                    // Extract number after "1:" (e.g., "1:10" -> 10)
                    const ratioMatch = ratioText.match(/1:(\d+)/);
                    const ratioValue = ratioMatch ? parseInt(ratioMatch[1]) : 1;
                    
                    if (!selectedDuplicationRatios.includes(ratioValue)) {
                        showRow = false;
                    }
                }

                row.style.display = showRow ? '' : 'none';
            }
        }
        
        function toggleFilter(columnIndex) {
            const dropdown = document.getElementById('filter-' + columnIndex);
            const allDropdowns = document.querySelectorAll('.filter-dropdown');
            
            // Close all other dropdowns
            allDropdowns.forEach(dd => {
                if (dd !== dropdown) {
                    dd.style.display = 'none';
                }});
            
            // Toggle current dropdown
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }
        
        function clearAllFilters() {
            const textFilters = document.querySelectorAll('.filter-input');
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            
            textFilters.forEach(filter => filter.value = '');
            checkboxes.forEach(checkbox => checkbox.checked = false);
            
            filterTable();
        }
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const isFilterClick = event.target.closest('.filterable') || event.target.closest('.filter-dropdown');
            const isColumnVisClick = event.target.closest('.column-visibility-dropdown');
            
            if (!isFilterClick) {
                document.querySelectorAll('.filter-dropdown').forEach(dd => {
                    dd.style.display = 'none';
                });
            }
            
            if (!isColumnVisClick) {
                document.getElementById('columnVisibilityDropdown').classList.remove('show');
            }
        });
        
        // Initialize Bootstrap tooltips
        function initializeTooltips() {
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            [...tooltipTriggerList].forEach(tooltipTriggerEl => {
                try {
                    // Dispose existing tooltip if any
                    const existingTooltip = bootstrap.Tooltip.getInstance(tooltipTriggerEl);
                    if (existingTooltip) {
                        existingTooltip.dispose();
                    }
                    
                    // Create new tooltip
                    new bootstrap.Tooltip(tooltipTriggerEl, {
                        boundary: document.body,
                        trigger: 'hover focus',
                        container: 'body'
                    });
                } catch (err) {
                    console.error('Error initializing tooltip:', err);
                }
            });
        }
        
        // Initialize tooltips when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTooltips();
        });
    </script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
